(function(){var t,e,n=function(t,e){return function(){return t.apply(e,arguments)}},r=function(t,e){function n(){this.constructor=t}for(var r in e)o.call(e,r)&&(t[r]=e[r]);return n.prototype=e.prototype,t.prototype=new n,t.__super__=e.prototype,t},o={}.hasOwnProperty;t=function(){function t(){this.addDelegation=n(this.addDelegation,this)}return t.prototype.forEach=function(t,e,n){var r,o;for(null==n&&(n=this),r=0,o=[];r<t.length;)e.call(n,t[r],r),o.push(r++);return o},t.prototype.extend=function(t,e){var n,r;for(n in e)r=e[n],t[n]=r;return t},t.prototype.merge=function(t,e){return this.extend(this.extend({},t),e)},t.prototype.addEvent=function(t,e,n,r){return null==r&&(r=!1),t.addEventListener(e,n,r)},t.prototype.addDelegation=function(t,e,n){return null==n&&(n=!1),document.body.addEventListener(t,function(t){return function(n){var r,o;for(r=n.target;r&&!(null!=(o=r.dataset)?o.playground:void 0);)r=r.parentNode;return r?e.call(t,r):void 0}}(this),n)},t}(),e=function(t){function e(){this.translateLanguageToBase=n(this.translateLanguageToBase,this),this.collectEachCode=n(this.collectEachCode,this),this.collectEachSnippet=n(this.collectEachSnippet,this),this.collectSnippets=n(this.collectSnippets,this),this.createForm=n(this.createForm,this),this.attachEvents=n(this.attachEvents,this),this.setupDefaults=n(this.setupDefaults,this),this.snippets={},this.languages={html:["html"],js:["javascript","coffeescript","javascript1.7","babel","typescript"],css:["css","scss"]},this.elements={playground:document.querySelectorAll("*[data-playground=jsfiddle]")},this.setupDefaults()}return r(e,t),e.prototype.setupDefaults=function(){return this.collectSnippets(),this.attachEvents(),console.log(this.snippets)},e.prototype.attachEvents=function(){return this.addDelegation("click",this.createForm)},e.prototype.createInputsFromParams=function(t,e){var n;return e?(n=document.createElement("input"),n.name=t,n.value=e,this.form.appendChild(n)):void 0},e.prototype.createForm=function(t){var e,n,r,o,a;e=t.dataset.playgroundFromGroup,o=this.snippets[e],this.form=document.createElement("form"),this.form.method="post",this.form.action=this.createUrl(o),this.form.target="_blank",r=o.params;for(n in r)a=r[n],this.createInputsFromParams(n,a);return document.body.appendChild(this.form),this.form.submit(),this.form.parentNode.removeChild(this.form)},e.prototype.collectSnippets=function(){return this.forEach(this.elements.playground,this.collectEachSnippet)},e.prototype.collectEachSnippet=function(t){var e,n,r,o;return this.currentSnippet={},e=t.dataset.playgroundFromGroup,r={title:t.dataset.playgroundTitle||null,description:t.dataset.playgroundDescription||null,resources:t.dataset.playgroundResources||null,dtd:t.dataset.playgroundDtd||"html 5",wrap:t.dataset.playgroundWrap||"l",normalize_css:t.dataset.playgroundNormalize||"yes"},o={framework:t.dataset.playgroundFramework||null,version:t.dataset.playgroundFrameworkVersion||null,dependencies:t.dataset.playgroundDependencies||null},n=document.querySelectorAll("*[data-playground-group="+e+"]"),this.forEach(n,this.collectEachCode),this.snippets[e]={url:o,params:this.merge(r,this.currentSnippet)}},e.prototype.collectEachCode=function(t){var e,n,r;return e=t.innerHTML,n=t.dataset.playgroundType,r=this.translateLanguageToBase(n),this.currentSnippet[r]=this.cleanupCode(e),this.currentSnippet["panel_"+r]=this.translateLanguageToId(r,n)},e.prototype.createUrl=function(t){var e,n,r,o,a,s,i;return a=[t.url.framework,t.url.version,t.url.dependencies],r=a[0],i=a[1],e=a[2],o=r?r+"/"+i:"library/pure",n=e?"dependencies/"+e+"/":"",s="//jsfiddle.net/api/post/"+o+"/"+n},e.prototype.translateLanguageToId=function(t,e){return this.languages[t].indexOf(e)},e.prototype.translateLanguageToBase=function(t){var e,n,r,o;e="",r=this.languages;for(n in r)o=r[n],o.indexOf(t)>=0&&(e=n);return e},e.prototype.cleanupCode=function(t){var e;return e=document.createElement("textarea"),e.innerHTML=t,e.value},e}(t),document.addEventListener("DOMContentLoaded",function(){return new e})}).call(this);